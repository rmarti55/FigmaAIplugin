<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Figma AI Plugin</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        #error {
            display: none;
            padding: 16px;
            color: #F24822;
        }
    </style>
</head>
<body>
    <div id="error"></div>
    <script>
        // Handle any errors that occur during loading
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            const errorDiv = document.getElementById('error');
            errorDiv.style.display = 'block';
            errorDiv.textContent = 'Error: ' + msg;
            parent.postMessage({ pluginMessage: { type: 'error', message: msg } }, '*');
            return false;
        };

        // Initialize plugin message handling
        window.onmessage = function(event) {
            // Verify the origin
            if (!/^https:\/\/([\w-]+\.)?figma.com$/.test(event.origin)) {
                return;
            }
            // Handle plugin messages
            if (event.data.pluginMessage) {
                // Handle different message types
                switch (event.data.pluginMessage.type) {
                    case 'init':
                        // Initialize the UI
                        break;
                    // Add other message handlers as needed
                }
            }
        };

        // Let the plugin know we're ready
        parent.postMessage({ pluginMessage: { type: 'ui-loaded' } }, '*');
    </script>
</body>
</html> 